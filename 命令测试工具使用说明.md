# 命令测试工具使用说明

## 工具介绍

这个命令测试工具是为了解决"attribute @s minecraft:generic.max_health base set 80"命令失效的问题而开发的。通过测试不同的命令执行方式，我们可以确定问题的根源。

## 如何使用

1. **触发测试**：
   - 手持平成嘿嘿剑（Heiseisword）
   - 同时按下Shift键和Ctrl键（下蹲+加速）
   - 系统会发送消息通知你测试已开始

2. **查看结果**：
   - 游戏内会收到测试结果消息
   - 服务器控制台会输出详细的日志信息
   - 查看三种不同命令执行方式的结果对比

## 测试内容

工具会测试三种不同的命令执行方式：

1. **方法1**：使用玩家的CommandSourceStack执行命令
   - 使用`@s`选择器
   - 测试普通消息命令和属性修改命令

2. **方法2**：使用服务器直接执行命令
   - 使用玩家UUID作为目标
   - 避免可能的选择器问题

3. **方法3**：使用不同形式的目标选择器
   - 使用`@p[name="玩家名"]`精确选择
   - 测试选择器语法是否正确

## 诊断建议

1. **权限问题**：如果所有测试都失败，可能是权限问题
   - 确保玩家有足够的权限执行属性命令

2. **选择器问题**：如果方法1失败但方法2成功，可能是选择器解析问题
   - 尝试使用UUID或精确的名称选择器

3. **模组冲突**：如果所有方法都失败，可能是其他模组干扰
   - 检查是否有模组修改了命令处理系统
   - 尝试在纯净环境中测试

4. **属性锁定**：某些模组可能会锁定玩家的最大生命值属性
   - 检查是否有模组专门管理玩家属性

## 日志分析

查看服务器日志中的`[CommandTest]`标记的消息，关注以下几点：

- 各方法的执行结果（0表示成功，非0表示失败）
- 任何异常信息或错误消息
- 环境检查信息

## 后续步骤

根据测试结果，我们可以进一步定位问题：

1. 如果是权限问题，可以尝试提升玩家权限
2. 如果是选择器问题，可以修改命令使用更精确的目标指定
3. 如果怀疑是模组冲突，可以尝试禁用其他模组进行排查
4. 如果确认是属性锁定，可以查找相关模组的配置文件进行修改

希望这个工具能帮助你解决命令执行失效的问题！